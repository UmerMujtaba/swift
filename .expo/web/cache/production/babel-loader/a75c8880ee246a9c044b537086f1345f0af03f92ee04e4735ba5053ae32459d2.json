{"ast":null,"code":"import _objectWithoutPropertiesLoose from\"@babel/runtime/helpers/objectWithoutPropertiesLoose\";const _excluded=[\"enabled\"];function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}import{State}from'../../State';import GestureHandler from'./GestureHandler';import RotationGestureDetector from'../detectors/RotationGestureDetector';const ROTATION_RECOGNITION_THRESHOLD=Math.PI/36;export default class RotationGestureHandler extends GestureHandler{constructor(...args){super(...args);_defineProperty(this,\"rotation\",0);_defineProperty(this,\"velocity\",0);_defineProperty(this,\"cachedAnchorX\",0);_defineProperty(this,\"cachedAnchorY\",0);_defineProperty(this,\"rotationGestureListener\",{onRotationBegin:_detector=>true,onRotation:detector=>{const previousRotation=this.rotation;this.rotation+=detector.getRotation();const delta=detector.getTimeDelta();if(delta>0){this.velocity=(this.rotation-previousRotation)/delta;}if(Math.abs(this.rotation)>=ROTATION_RECOGNITION_THRESHOLD&&this.currentState===State.BEGAN){this.activate();}return true;},onRotationEnd:_detector=>{this.end();}});_defineProperty(this,\"rotationGestureDetector\",new RotationGestureDetector(this.rotationGestureListener));}init(ref,propsRef){super.init(ref,propsRef);this.setShouldCancelWhenOutside(false);}updateGestureConfig(_ref){let{enabled=true}=_ref,props=_objectWithoutPropertiesLoose(_ref,_excluded);super.updateGestureConfig(Object.assign({enabled:enabled},props));}transformNativeEvent(){return{rotation:this.rotation?this.rotation:0,anchorX:this.getAnchorX(),anchorY:this.getAnchorY(),velocity:this.velocity?this.velocity:0};}getAnchorX(){const anchorX=this.rotationGestureDetector.getAnchorX();return anchorX?anchorX:this.cachedAnchorX;}getAnchorY(){const anchorY=this.rotationGestureDetector.getAnchorY();return anchorY?anchorY:this.cachedAnchorY;}onPointerDown(event){this.tracker.addToTracker(event);super.onPointerDown(event);this.tryToSendTouchEvent(event);}onPointerAdd(event){this.tracker.addToTracker(event);super.onPointerAdd(event);this.tryBegin();this.rotationGestureDetector.onTouchEvent(event,this.tracker);}onPointerMove(event){if(this.tracker.getTrackedPointersCount()<2){return;}if(this.getAnchorX()){this.cachedAnchorX=this.getAnchorX();}if(this.getAnchorY()){this.cachedAnchorY=this.getAnchorY();}this.tracker.track(event);this.rotationGestureDetector.onTouchEvent(event,this.tracker);super.onPointerMove(event);}onPointerOutOfBounds(event){if(this.tracker.getTrackedPointersCount()<2){return;}if(this.getAnchorX()){this.cachedAnchorX=this.getAnchorX();}if(this.getAnchorY()){this.cachedAnchorY=this.getAnchorY();}this.tracker.track(event);this.rotationGestureDetector.onTouchEvent(event,this.tracker);super.onPointerOutOfBounds(event);}onPointerUp(event){super.onPointerUp(event);this.tracker.removeFromTracker(event.pointerId);this.rotationGestureDetector.onTouchEvent(event,this.tracker);if(this.currentState!==State.ACTIVE){return;}if(this.currentState===State.ACTIVE){this.end();}else{this.fail();}}onPointerRemove(event){super.onPointerRemove(event);this.rotationGestureDetector.onTouchEvent(event,this.tracker);this.tracker.removeFromTracker(event.pointerId);}tryBegin(){if(this.currentState!==State.UNDETERMINED){return;}this.begin();}activate(_force){super.activate();}onReset(){if(this.currentState===State.ACTIVE){return;}this.rotation=0;this.velocity=0;this.rotationGestureDetector.reset();}}","map":{"version":3,"names":["State","GestureHandler","RotationGestureDetector","ROTATION_RECOGNITION_THRESHOLD","Math","PI","RotationGestureHandler","constructor","args","_defineProperty","onRotationBegin","_detector","onRotation","detector","previousRotation","rotation","getRotation","delta","getTimeDelta","velocity","abs","currentState","BEGAN","activate","onRotationEnd","end","rotationGestureListener","init","ref","propsRef","setShouldCancelWhenOutside","updateGestureConfig","_ref","enabled","props","_objectWithoutPropertiesLoose","_excluded","Object","assign","transformNativeEvent","anchorX","getAnchorX","anchorY","getAnchorY","rotationGestureDetector","cachedAnchorX","cachedAnchorY","onPointerDown","event","tracker","addToTracker","tryToSendTouchEvent","onPointerAdd","tryBegin","onTouchEvent","onPointerMove","getTrackedPointersCount","track","onPointerOutOfBounds","onPointerUp","removeFromTracker","pointerId","ACTIVE","fail","onPointerRemove","UNDETERMINED","begin","_force","onReset","reset"],"sources":["/Users/nextek/Desktop/folder/SwiftPay/node_modules/react-native-gesture-handler/lib/module/web/handlers/RotationGestureHandler.ts"],"sourcesContent":["import { State } from '../../State';\nimport { AdaptedEvent, Config } from '../interfaces';\n\nimport GestureHandler from './GestureHandler';\nimport RotationGestureDetector, {\n  RotationGestureListener,\n} from '../detectors/RotationGestureDetector';\n\nconst ROTATION_RECOGNITION_THRESHOLD = Math.PI / 36;\n\nexport default class RotationGestureHandler extends GestureHandler {\n  private rotation = 0;\n  private velocity = 0;\n\n  private cachedAnchorX = 0;\n  private cachedAnchorY = 0;\n\n  private rotationGestureListener: RotationGestureListener = {\n    onRotationBegin: (_detector: RotationGestureDetector): boolean => true,\n    onRotation: (detector: RotationGestureDetector): boolean => {\n      const previousRotation: number = this.rotation;\n      this.rotation += detector.getRotation();\n\n      const delta = detector.getTimeDelta();\n\n      if (delta > 0) {\n        this.velocity = (this.rotation - previousRotation) / delta;\n      }\n\n      if (\n        Math.abs(this.rotation) >= ROTATION_RECOGNITION_THRESHOLD &&\n        this.currentState === State.BEGAN\n      ) {\n        this.activate();\n      }\n\n      return true;\n    },\n    onRotationEnd: (_detector: RotationGestureDetector): void => {\n      this.end();\n    },\n  };\n\n  private rotationGestureDetector: RotationGestureDetector =\n    new RotationGestureDetector(this.rotationGestureListener);\n\n  public init(ref: number, propsRef: React.RefObject<unknown>): void {\n    super.init(ref, propsRef);\n\n    this.setShouldCancelWhenOutside(false);\n  }\n\n  public updateGestureConfig({ enabled = true, ...props }: Config): void {\n    super.updateGestureConfig({ enabled: enabled, ...props });\n  }\n\n  protected transformNativeEvent() {\n    return {\n      rotation: this.rotation ? this.rotation : 0,\n      anchorX: this.getAnchorX(),\n      anchorY: this.getAnchorY(),\n      velocity: this.velocity ? this.velocity : 0,\n    };\n  }\n\n  public getAnchorX(): number {\n    const anchorX = this.rotationGestureDetector.getAnchorX();\n\n    return anchorX ? anchorX : this.cachedAnchorX;\n  }\n\n  public getAnchorY(): number {\n    const anchorY = this.rotationGestureDetector.getAnchorY();\n\n    return anchorY ? anchorY : this.cachedAnchorY;\n  }\n\n  protected onPointerDown(event: AdaptedEvent): void {\n    this.tracker.addToTracker(event);\n    super.onPointerDown(event);\n\n    this.tryToSendTouchEvent(event);\n  }\n\n  protected onPointerAdd(event: AdaptedEvent): void {\n    this.tracker.addToTracker(event);\n    super.onPointerAdd(event);\n\n    this.tryBegin();\n    this.rotationGestureDetector.onTouchEvent(event, this.tracker);\n  }\n\n  protected onPointerMove(event: AdaptedEvent): void {\n    if (this.tracker.getTrackedPointersCount() < 2) {\n      return;\n    }\n\n    if (this.getAnchorX()) {\n      this.cachedAnchorX = this.getAnchorX();\n    }\n    if (this.getAnchorY()) {\n      this.cachedAnchorY = this.getAnchorY();\n    }\n\n    this.tracker.track(event);\n\n    this.rotationGestureDetector.onTouchEvent(event, this.tracker);\n\n    super.onPointerMove(event);\n  }\n\n  protected onPointerOutOfBounds(event: AdaptedEvent): void {\n    if (this.tracker.getTrackedPointersCount() < 2) {\n      return;\n    }\n\n    if (this.getAnchorX()) {\n      this.cachedAnchorX = this.getAnchorX();\n    }\n    if (this.getAnchorY()) {\n      this.cachedAnchorY = this.getAnchorY();\n    }\n\n    this.tracker.track(event);\n\n    this.rotationGestureDetector.onTouchEvent(event, this.tracker);\n\n    super.onPointerOutOfBounds(event);\n  }\n\n  protected onPointerUp(event: AdaptedEvent): void {\n    super.onPointerUp(event);\n    this.tracker.removeFromTracker(event.pointerId);\n    this.rotationGestureDetector.onTouchEvent(event, this.tracker);\n\n    if (this.currentState !== State.ACTIVE) {\n      return;\n    }\n\n    if (this.currentState === State.ACTIVE) {\n      this.end();\n    } else {\n      this.fail();\n    }\n  }\n\n  protected onPointerRemove(event: AdaptedEvent): void {\n    super.onPointerRemove(event);\n    this.rotationGestureDetector.onTouchEvent(event, this.tracker);\n    this.tracker.removeFromTracker(event.pointerId);\n  }\n\n  protected tryBegin(): void {\n    if (this.currentState !== State.UNDETERMINED) {\n      return;\n    }\n\n    this.begin();\n  }\n\n  public activate(_force?: boolean): void {\n    super.activate();\n  }\n\n  protected onReset(): void {\n    if (this.currentState === State.ACTIVE) {\n      return;\n    }\n\n    this.rotation = 0;\n    this.velocity = 0;\n    this.rotationGestureDetector.reset();\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}